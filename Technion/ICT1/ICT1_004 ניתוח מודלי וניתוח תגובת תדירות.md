---
aliases:
  - ניתוח מודלי
  - ניתוח תגובת תדירות
  - מודל ייחוס
  - מאמץ בקרה
  - דינמיקה דומיננטית
  - רמת תגובות יתר
---
# מבוא
ב[[ICT1_003 בקרה בחוג פתוח#מבוא|היפוך תהליך]] ראינו שבקר מושלם המניב $y=r$ לאות ייחוס $r$ הוא:
- לא ניתן למימוש במציאות
- עלול להיות מאוד לא יציב בגלל אי-יציבות פנימית.

נעסוק כעת באיך נוכל לדרוש $y\approx r$ במקום $y=r$.

עבור בקר בחור פתוח מהצורה:
$$y=P(d+C_{\text{ol}}r)=Pd+PC_{\text{ol}}r$$
![[{A818B90D-5146-49B1-89C7-3CFBE15A19DA}.png|bookhue|450]]
יש לתגובה שני מרכיבים בלתי תלויים:
- תגובה להפרעה $y_{d}=Pd$, שלא ניתן לשליטה ע"י הבקר $C_{\text{ol}}$.
- תגובה לייחוס $y_{r}=PC_{\text{ol}}r$ שניתן לשליטה ע"י הבקר $C_{\text{ol}}$.

נעסוק במה שאנו כן יכולים לשלוט, הדינמיקה המבוקרת
$$T_{yr}=PC_{\text{ol}}$$
והתגובות מצב מתמיד (steady-state) ומעבר (transient) שלו.

# תגובה במצב מתמיד
יהי $y=T_{yr}r$ ל-$T_{yr}$ יציבה. נרצה למצוא את $e=r-y$ במצב מתמיד. במקרה והאות ייחוס שלנו הוא מהצורה
$$r(t)=\sin(\omega t+\phi)\mathbb{1}(t)$$
אז השגיאה שלנו תהיה
$$e_{\text{ss}}=\lvert 1-T_{yr} \rvert$$
כי התגובה במצב מתמיד של אות מדרגה תואם ל-$\omega=0$ ([[LSY1_009 Frequency Domain Analysis#Bode Diagram|תזכורת]]).
במילים אחרות, השגיאה שווה לגודל של התגובת תדירות של $S_{yr}:=1-T_{yr}$.
נאמר שהשגיאה "קטנה" אם:
$$e_{\text{ss}}\ll 1\implies \lvert S_{yr}(j\omega) \rvert\ll 1$$
במקרים מסוימים יהיה יותר נוח לחשוב על טענה זאת כ
$$T_{yr}(j\omega)\approx 1$$
כי $\lvert T_{yr}(j\omega) \rvert\approx1$ ו- $\arg T_{yr}(j\omega)\approx0$.
מאחר ו- $T_{yr}=PC_{\text{ol}}$, אז במידה והאות ייחוס שלנו $r(t)$ הוא תנודתי עם תדירות $\omega_{r}$ כלשהו, כדי לקבל את $r(t)$ במצב מתמיד מספיק לנו לדרוש:
$$C_{\text{ol}}(j\omega_{r})=\dfrac{1}{P(j\omega_{r})}$$
שזה לא אותו הדבר כמו לדרוש $C_{\text{ol}}(s)=\dfrac{1}{P(s)}$. הדרישה החדשה שלנו הרבה יותר חלשה! אנחנו בעצם מבצעים כאן היפוך תהליך רק בתדירות מסוימת, $\omega_{r}$. אם נרצה עוד תדירויות, נוכל פשוט להוסיף את הדרישות לתדירויות האלה בנוסף.

>[!notes] הערה: 
 >אם אנו עובדים במערכות עם פרמטרים ממשיים, אז לדרישה $C_{\text{ol}}(j\omega_{r})=1/P(j\omega_{r})$ נצטרף להוסיף את הדרישה הצמודה $C_{\text{ol}}(-j\omega_{r})=1/P(-j\omega_{r})$. הסיבה לכך היא שהדרישה הראשונה אמנם מבטיחה לנו שהעוצמה של $y$ תהיה שווה לעוצמה של $r$ במצב מתמיד, אבל אין שום הבטחה על הפאזה שלה. ע"י הדרישה של הצמוד של $j\omega_{r}$, שהוא $-j\omega_{r}$, בעצם אנו "מסדרים" את $C_{\text{ol}}$ כך שגם הפאזה של $y$ תהיה שווה לפאזה של $r$ במצב מתמיד.
 

>[!example] דוגמה: 
> 
> אם $\omega=0$, כלומר $r=\mathbb{1}$, אז:
> $$C_{\text{ol}}(0)=\dfrac{1}{P(0)}$$
> מה שאומר שאנו צריכים לקבוע את ההגברה הסטטית $k_{\text{st}}$ הנכון לבקר. למשל במקרה של מערכת מסה-גלגלת עם ריסון וקפיץ:
> ![[{E08B23F2-66CC-46F2-84D5-9EB8ABAFC158}.png|bookhue|200]]
> נבחר
> $$C_{\text{ol}}=\dfrac{1}{\rho} \dfrac{1}{\tau s+1}$$
> כי ההגברה הסטטית של מערכת זו היא $k_{\text{st}}=\rho$. הבקר הבא
> ![[Screenshot_20241201_132023_Samsung Notes.jpg|bookhue|500]]
> הופך את $P(0)=\rho$, כך ש- $e_{\text{ss}}=0$:
> ![[Screenshot_20241201_132119_Samsung Notes.jpg|bookhue|500]]
> 
> ברור שהתגובת מעבר (transient response) היא לא מה שרצינו, אנחנו בכלל רצינו פונקציית מדרגה, אבל כן ענינו על הדרישה במצב מתמיד, ועוד יש לנו דרגת חופש עם $\tau$!
> 
> אם כעת $r(t)=\sin(\omega t+\phi)\mathbb{1}(t)$, אז $e_{\text{ss}}=0$ אמ"ם:
> $$C_{\text{ol}}(j\omega)=\dfrac{1}{P(j\omega)} \qquad \text{and} \qquad C_{\text{ol}}(-j\omega)=\dfrac{1}{P(-j\omega)}$$
> נוכל לענות על דרישות אלו אם לכל $\tau>0$:
> $$C_{\text{ol}}(s)=\dfrac{{b}_{1}s+{b}_{0}}{\tau s+1}$$
> ונמצא את ${b}_{0}$ ו-${b}_{1}$ ע"י הצבה בדרישות:
> $${b}_{0}\pm {b}_{1}j\omega=(1\pm j\tau\omega)/P(\pm j\omega)$$
> נוכל לייצג זאת מטריצית:
> $$\begin{pmatrix}
> 1 & j\omega \\
> 1 & -j\omega
> \end{pmatrix}\begin{pmatrix}
> {b}_{0} \\
> {b}_{1}
> \end{pmatrix}\begin{pmatrix}
> (1+j\tau\omega)/P(j\omega) \\
> (1-j\tau\omega)/P(-j\omega)
> \end{pmatrix}$$
> שניתנת לפתרון לכל $\omega \neq 0$.
> במידה ו- $\omega=4$, לכל $\tau>0$, הבקר ב
> ![[Screenshot_20241201_132853_Samsung Notes.jpg|bookhue|450]]
> הופך את $P(\pm 4j)$ כך ש- $e_{\text{ss}}=0$:
> ![[Screenshot_20241201_133006_Samsung Notes.jpg|bookhue|500]]
> 

# ניתוח מודלי
נרצה לאפיין מערכות באופן איכותי ע"י מבט פשוט באפסים/קטבים שלהם. במקרים של מערכות מסדר ראשון או שני אנו מכירים כבר איך עושים זאת עם דיאגרמות בודה, אבל נביט קצת יותר לעומק בקטבים והאפסים ופרמטרים אחרים העלולים לעזור לנו בעזרת מה שנקרא **ניתוח מודלי (modal analysis)**.

## ניתוח מערכות מסדר ראשון ושני

במקרה של מערכת מסדר ראשון:
$$G(s)=\dfrac{k_{\text{st}}}{\tau s+1}$$
יש לה קוטב אחד ממשי ב:
$$s=-\dfrac{1}{\tau}:=-\lambda _{r}$$
כאשר $\lambda_{r}>0$ הוא החלק הממשי של הקוטב. לכן:
![[Screenshot_20241201_133558_Samsung Notes.jpg|bookhue|500]]
>תגובת מדרגה של מערכת מסדר ראשון. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שככל ש- $\lambda_{r}$ גדול יותר, התגובת מעבר מהירה יותר.

עבור מערכת מסדר שני *תת מרוסנת* עם פונקציית תמסורת מהצורה:
$$G(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{(s+\zeta\omega_{n})^{2}+(1-\zeta ^{2}){\omega_{n}}^{2}}$$
עם הקטבים ב
$$s=-\zeta\omega_{n}\pm j\sqrt{ 1-\zeta ^{2} }\omega_{n}:=-\lambda_{r}\pm j\lambda_{i}$$
כאשר $\lambda_{r}$ ו-$\lambda_{i}$ הם הערכים בערך מוחלט של החלקים הממשיים והמדומים של הקטבים. נשים לב ש:
$$\dfrac{\lambda_{r}}{\lambda_{i}}=\dfrac{\zeta}{\sqrt{ 1-\zeta ^{2} }}\qquad \text{and}\qquad {{\lambda_{r}}^{2}+{\lambda_{i}}^{2}}={\omega_{n}}^{2}$$
כלומר:
- היחס בין החלקים הממשיים והמדומים של הקוטב תלוי רק ב-$\zeta$.
- הערך המוחלט של הקוטב תלוי אך ורק ב-$\omega_{n}$.

![[Screenshot_20241201_134343_Samsung Notes 1.jpg|bookhue|500]]
>תגובת מדרגה של מערכת מסדר שני תת-מרוסנת. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נראה כי:
 - ככל שהיחס $\dfrac{\lambda_{r}}{\lambda_{i}}$ יותר גדול, כך התגובת יתר (overshoot) יותר נמוכה.
 - המהירות של התגובה פרופורציונלית לערך המוחלט של הקטבים.

>[!notes] הערה: 
 >נשים לב שמ[[LSY1_007 Laplace Transform#Final and Initial Values Theorems|משפט הערך ההתחלתי]] השיפוע ההתחלתי של מערכת עם הפרש קטבים ואפסים שגדול מ-$1$ הוא תמיד $0$, *עבור כניסת מדרגה*.
 
## רמות תגובות יתר ותדירות טבעית
מהגרף של תגובת מדרגה של מערכת מסדר שני לעיל אנו רואים שעבור יחס $\dfrac{\lambda_{r}}{\lambda_{i}}$ קבוע התגובת יתר קבועה, כך שנוכל לשרטט על המישור המרוכב קווים המתארים תגובות יתר קבועות:
![[Screenshot_20241201_135137_Samsung Notes.jpg|bookhue|250]]
>קווים רדיאליים של תגובות יתר קבועות. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

אם נרצה לדרוש תגובה יתר מקסימלית $\text{OS}^{*}\in (0\%,\,100\%)$ כלשהי, נוכל לשרטט על המישור את כל האזור שמקיים $\text{OS}<\text{OS}^{*}$:
![[Screenshot_20241201_135457_Samsung Notes 1.jpg|bookhue|250]]
>האזור במישור המרוכב עבורו הקטבים יקיימו $\text{OS}<\text{OS}^{*}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

>[!notes] הערה: 
 >רמת המקדם ריסון $\zeta=\text{const}$ הם אותם קווים רידאליים.
 
נשים לב גם שתדירות טבעית $\omega_{n}$ קבועה ניתנת לתיאור כחצאי מעגלים במישור המרוכב - $\omega_{n}={\lambda_{r}}^{2}+{\lambda_{i}}^{2}=\text{const}$. אם נרצה לדרוש תדירות טבעית כלשהית $\omega_{n}^{*}>0$, נוכל לשרטט על המישור את כל האזור בהם הקטבים מקיימים $\omega_{n}>{\omega_{n}}^{*}$:
![[Screenshot_20241201_140401_Samsung Notes.jpg|bookhue]]
>האזור במישור המרוכב עבורו הקטבים יקיימו $\omega_{n}>\omega_{n}^{*}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

כעת, כדי לדרוש תגובה מעבר שהיא גם יחסית מהירה ($\omega_{n}>\omega_{n}^{*}$) וגם לא תנודתית מדי ($\text{OS}<\text{OS}^{*}$), נצטרך לדרוש שהקטבים שלנו יתמקמו בשני האזורים לעיל:
![[Screenshot_20241201_140639_Samsung Notes.jpg|bookhue|250]]
>האזור בו כל הקטבים ממקומים כדי ליצור תגובות מדרגה "מהירות מספיק" ו"חלקות מספיק". [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].


## השפעה של קוטב נוסף ואפס נוסף
יהי
$$G_{\tau}(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})((\beta/\omega_{n})s+1)}$$
עבור $\beta>0$. ניתן לחשוב על מערכת זו כחיבור בטור של מערכת מסדר ראשון ומערכת מסדר שני:
![[Screenshot_20241201_141235_Samsung Notes.jpg|bookhue|500]]

ניתן לחשוב על התגובה של $G_{\tau}$ כהתגובה למערכת מסדר שני לקלט "מדרגה חלקה". לכן נצפה שהתגובה תהיה איטית וחלקה יותר.
![[Screenshot_20241201_142258_Samsung Notes.jpg|bookhue|500]]
>התגובה של $G_{\tau}$ עבור ערכים שונים של $\beta$, כאשר $\beta=0$ שקול למערכת מסדר שני. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שככל ש-$\beta$ גדל (ולפיכך גם $\tau=\beta /\omega_{n}$ גדל):
- התגובת יתר $\text{OS}$ קטנה.
- הזמן עלייה (rise time) עולה.

נביט כעת בהשפעה של אפס נוסף על המערכת. יהי:
$$G_{\alpha}(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}((\alpha /\omega_{n})s+1)}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}$$
עבור $\alpha \in \mathbb{R}$. לא נתעמק יותר מדי במה קורה פה, מספיק שנדע שאם המערכת מסדר שני המוחבאת כאן היא תת-מרוסנת:
![[Screenshot_20241201_143229_Samsung Notes.jpg|bookhue]]
>תגובת מדרגה ל-$G_{\tau}$ עבור ערכים שונים של $\alpha$, כאשר המערכת מסדר שני הבסיסית היא תת-מרוסנת. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ככל ש-$\lvert \alpha \rvert$ גדל:
- התגובת יתר $\text{OS}$ גדלה.
- התגובת חסר (undershoot) $\text{US}$ גדלה.
- הזמן עלייה $t_{r}$ קטן.
- הזמן רגיעה $t_{s}$ גדל.

במידה והמערכת מסדר שני הבסיסית מרוסנת-יתר:
![[Screenshot_20241201_144156_Samsung Notes 1.jpg|bookhue]]
>תגובת מדרגה ל-$G_{\tau}$ עבור ערכים שונים של $\alpha$, כאשר המערכת מסדר שני הבסיסית היא מרוסנת-יתר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ככל ש-$\lvert \alpha \rvert$ גדל:
- התגובת יתר $\text{OS}$ גדלה, במידה ו- $\alpha>\zeta+\sqrt{ \zeta ^{2}-1 }$.
- התגובת חסר $\text{US}$ גדלה, במידה ו- $\alpha<0$.
- הזמן עלייה $t_{r}$ קטן.

ראינו כעת שבעוד ניתוח מודלי עובד טוב למערכות מסדר ראשון ושני, הוא כושל במקרים בהם מוסיפים למערכות אלו קטבים ואפסים נוספים. למשל, עלולה להיות לנו תגובת יתר למערכות רק עם אפסים/קטבים ממשיים.

אבל, במקרים מסוימים, נוכל להרחיב את הניתוח המודלי למערכת מסדר גבוה יותר אם ה**דינמיקה הדומיננטית** של המערכת היא מסדר נמוך.

## דינמיקה דומיננטית
>[!def] הגדרה: אפס/קוטב דומיננטי
>נאמר שקבוצה של אפסים/קטבים הם **דומיננטיים** אם אחת מהטענות הבאות תקפות:
>- כלל האפסים/קטבים האחרים רחוקים בלפחות פי $5$ מהציר המדומה $j\omega$.
>- האפסים/קטבים הקרובים "כמעט מבטלים" אחד את השני.

![[Screenshot_20241201_145427_Samsung Notes.jpg|bookhue]]
>קטבים ואפסים (בכחול) שנחשבים לא דומיננטיים. קוטב מסומן ב-$\times$, אפס מסומן ב-$\circ$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

>[!example] דוגמה: 
> לכל $\alpha>0$, נגדיר:
> $${G}_{1}(s)=\dfrac{8}{s+1}\cdot \dfrac{s/8+1}{s^{2}/\alpha+12s/\alpha+1}$$
> הקטבים הם $s=-1,\,-6\pm\sqrt{ 36-\alpha }$ ויש אפס יחיד ב-$s=-8$. נשווה למערכת מסדר נמוך:
> $${G}_{2}(s)=\dfrac{8}{s+1}$$
> ![[Screenshot_20241201_150531_Samsung Notes.jpg|bookhue]]
> >השוואה של התגובות מדרגה של המערכת ממעלה שלישית ${G}_{1}$ ומערכת ממעלה ראשונה ${G}_{2}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].


# ניתוח תגובת תדירות
עוד דרך לאפיין מערכות היא בעזרת **ניתוח תגובת תדירות (frequency-response analysis)**. נביט למשל בגרף בודה-הגבר (magnitude) של מערכת מסדר ראשון
$$G(s)=\dfrac{1}{\tau s+1}$$

![[Screenshot_20241201_151130_Samsung Notes 1.jpg|bookhue|500]]
>גרף בודה-הגבר (magnitude) של $G(s)$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב ש:
- ככל ש-$\tau$ קטן, הרוחב-פס (bandwidth) $\omega_{b}$ מתרחב ([[LSY1_009 Frequency Domain Analysis#Filters|תזכורת לפילטרים]]).

אם נביט בתגובת תדירות ומדרגה שלו:

![[Screenshot_20241201_151533_Samsung Notes.jpg|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\tau$ שונים. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נסיק ש:
- עבור רוחב-פס רחב יותר אנו מקבלים זמן עלייה קצר יותר - תגובת מעבר מהירה יותר.

מבחינת מערכת מסדר שני:
$$G(s)=\dfrac{{\omega_{n}}^{2}}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}$$
הגרף בודה שלו:
![[{C7369056-992D-4ADA-91CC-1E03B993E28E}.png|bookhue|500]]
>גרף בודה-הגבר (magnitude) של $G(s)$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שהרוחב-פס $\omega_{b}$:
- גדל כאשר $\omega_{n}$ גדל (והתגובת מדרגה הופכת להיות מהירה יותר).
- גודל מעט כאשר $\zeta$ יורדת (והתגובת מדרגה הופכת להיות מהירה יותר).
פסגת התהודה (resonant peak):
- גדל כאשר $\zeta$ קטנה (והתגובת מדרגה יותר רַעְדָנִית, shaky).

אם נביט בתגובת תדירות ומדרגה שלו עבור $\zeta$ קבוע ו-$\omega_{n}$ משתנה:
![[{7DDFEA94-812A-46BB-91F0-9BC003121C5E}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta=1$ ו- $\omega_{n}\in \{ 0.25,1,4 \}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

מה שמראה ש:
- רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).

עבור $\zeta$ משתנה ו-$\omega_{n}$ קבוע:
![[{24857EA3-02F7-44BE-ACCB-6CC0A1EF3FB5}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta \in \{ 0.5,1/3,0.2 \}$ ו- $\omega_{n}=1$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

מה שמראה ש:
- תהודה $M_{r}$ גדולה יותר גורמת לתגובת יתר $\text{OS}$ גדולה יותר.

אחד מהיתרונות של ניתוח תגובת תדירות הוא שאת הכללי אצבע שעובדים עבור מערכות מסדר ראשון ושני ניתן גם להרחיב למערכות כלליות. למשל, אם:
$$G(s)=\dfrac{\alpha\omega_{n}s+{\omega_{n}}^{2}}{(s/2+1)(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})}$$
ואז עם $\zeta$ ו-$\omega_{n}$ קבועים, ו-$\alpha$ משתנה:
![[{8D20AA8D-6F40-4407-819D-843474758940}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta=1,\,\omega_{n}=1$ ו-$\alpha \in \{ 2,3,5 \}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

וגם כאן:
- רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).
- תהודה $M_{r}$ גדולה יותר גורמת לתגובת יתר $\text{OS}$ גדולה יותר.

בכללי נוכל לומר ש:
>[!notes] טיפים: 
> - ככל ש-$M_{r}$ גדול יותר, התגובות יתר וחסר יהיו גדולים יותר.
> - בדרך כלל:
> 	- פסגות צרות יותר מעידות על תגובה תנודתית עם תדירויות הקרובות לתדירויות של הפסגה בדיאגרמת בודה-הגבר.
> 	- פסגות רחבות יותר מעידות על תגובת יתר או חסר ללא תנודות.
> - רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).

# מודל ייחוס
בהינתן תהליך יציב $P$,
![[{F9DF3806-6FD9-47DE-91C1-E7156FFDD7F1}.png|bookhue|400]]

נרצה למצוא $C_{\text{ol}}$ ש:
- מייצב פנימית את המערכת.
- מבטיח שגיאות אפסיות במצב מתמיד עבור אותות ייחוס מסויימים.
- מספק תגובת מעבר (transient) "טובה" (למשל, מספיק מהיר וחלק).

בעוד ייצוב המערכת הוא יחסית פשוט (צריך רק לדאוג שגם $C_{\text{ol}}$ יהיה יציב), די קשה לנו לאכוף את התנאים על התגובות במצב מתמיד, ובמיוחד על התגובת מעבר.

נתחיל מלבטא את הבקר שאנו רוצים ב-$T_{\text{ref}}$, שנקרא לו ה**מודל ייחוס**, כלומר נרצה ש:
$$T_{yr}=T_{\text{ref}}$$
כאשר ה-$T_{\text{ref}}$ מקיים את כל התנאים הרצויים לעיל.
לכן, נרצה ש:
$$C_{\text{ol}}(s)=\dfrac{T_{\text{ref}}(s)}{P(s)}$$
כדי שתהיה יציבות פנימית, צריך ש-$P,\,C_{\text{ol}}$ וגם $PC_{\text{ol}}=T_{\text{ref}}$ יהיו יציבים, מה שמגביל את הבחירה של $T_{\text{ref}}$.

נסמן:
$$P(s)=\dfrac{N_{P}(s)}{D_{P}(s)}\qquad \text{and}\qquad T_{\text{ref}}(s)=\dfrac{N_{\text{ref}}(s)}{D_{\text{ref}}(s)}$$
מיציבות פנימית, אנו צריכים ש- $D_{P},D_{\text{ref}}$ יהיו [[LSY1_007 Laplace Transform#Categorizing Polynomials|Hurwitz]]. במקרה זה:
$$C_{\text{ol}}(s)=\dfrac{T_{\text{ref}}(s)}{P(s)}=\dfrac{N_{\text{ref}}(s)D_{P}(s)}{D_{\text{ref}}(s)N_{P}(s)}$$
נסיק כי לבקר $C_{\text{ol}}$ אין קטבים לא יציבים אמ"ם:
- כל אפס של $P(s)$ שנמצא ב-$\bar{\mathbb{C}}_{0}$ הוא גם אפס של $T_{\text{ref}}(s)$.

בנוסף, הבקר הוא proper אמ"ם:
- עודף הקטבים של $T_{\text{ref}}(s)$ הוא לפחות גדול כמו העודף קטבים של $P(s)$.

אם $T_{\text{ref}}$ מקיים את שני התנאים לעיל והוא גם יציב בפני עצמו, נאמר כי הוא מודל ייחוס קביל/אפשרי/מותר (admissible).
חוץ מכך, נרצה גם שהמודל שלנו יהיה:
- עם מבנה low-pass:
	- הרוחב-פס שנבחר כולל את התדירויות שאנו מעוניינים בהם ולא יותר (אין סיבה לבחור ברוחב פס רחב - קשה מדי ליישם, דורש די הרבה מאמץ מהבקר שלנו).
	- ל- $T_{\text{ref}}(0)=1$ יש $e_{\text{ss}}=0$ לאות ייחוס מדרגה.
	- הקטבים ממוקמים באזורים "טובים" כדי שהמעברים יהיו חלקים.
- פשוט:
	- לרוב נרצה $T_{\text{ref}}$ מסדר ראשון או שני.
	- אם לא ניתן להימנע ממערכות מסדר גבוה, אז נרצה שלפחות התגובה הדומיננטית תהיה מסדר ראשון או שני.
	- אם חייבים להיות אפסים ב-RHP, נצמצם את הרוחב פס.

# מאמץ בקרה

>[!example] דוגמה: 
>
>בהינתן המעלית שלנו עם פונקציית תמסורת:
>$$P(s)=\dfrac{(cs+k)\rho}{ms^{2}+cs+k}$$
>![[{E08B23F2-66CC-46F2-84D5-9EB8ABAFC158}.png|bookhue|200]]
> נוכל לבחור כל $T_{\text{ref}}$ יציב, שהפונקציית תמסורת שלו עם לפחות עודף קוטף אחד. לכן נוכל לבחור
>$$T_{\text{ref}}(s)=\dfrac{1}{\tau s+1}$$
> ו-*נכוונן* את קבוע הזמן שלו $\tau$ כדי שיהיה לנו:
>  - תגובות מעבר מהירות מספיק
>  - רוחב פס רחב של תדירויות של $r$ ש-$T_{\text{ref}}$ יעקוב אחריהם (כלומר, כמה שיותר $\omega_{r}$ עבורם $y\approx r$.
> 
> נקבל בקר מהצורה:
> $$C_{\text{ol}}=\dfrac{ms^{2}+cs+k}{\rho(cs+k)(\tau s=1)}$$
> ![[{5654731A-0F8C-4D8C-8EEB-78E202DC46D6}.png|bookhue|500]]
> 
> ![[{398DD4F8-1C60-4926-8F5A-5E49D9502B69}.png|bookhue|500]]
> >תגובת מדרגה של $T_{yr}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> נדמה כי ניתן ליישם $T_{yr}$ לכל $\tau>0$, ואם אנו רוצים תגובה מאוד מהירה, אנו רק צריכים לבחור $\tau$ קטנה מספיק.
> הבעיה מתחילה כאשר נביט בתגובת מדרגה של הבקר:
> ![[{426FC872-F047-4320-9EEA-30D002B33145}.png|bookhue|500]]
> >תגובת מדרגה של הבקר $C_{\text{ol}}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> אנו יכולים לראות שעם ההאצה של $y$ אנו דורשים יותר מהבקר שלנו - מהירות עצומה של $u$. לתופעה זו אנו קוראים **מאמץ בקרה**, ונרצה להשאיר אותו כמה שיותר קטן. למשל, במקרה של המעלית המתוארת בדוגמה, קשה לנו מאוד לבנות מנוע שיוכל להגיע למהירויות זוויתיות עצומות כאלה. אנחנו גם לא נרצה לעשות זאת בדרך כלל, זה סתם יעיף את כל מי שבתוך המעלית לתקרה.
> 
> נראה כי גם בתגובת תדירות יש לנו בעיה:
> ![[{E4A39236-4D5D-452D-9B80-A2155F53277D}.png|bookhue|500]]
> >תגובת תדירות של $C_{\text{ol}}$ - דיאגרמת בודה-הגבר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> ככל ש-$\tau$ קטנה, השיאים של $\lvert C_{\text{ol}}(j\omega) \rvert$ עולים, מה שגורם לשיאים יותר גבוהים ב-$u$. הסיבה שאנו מקבלים שיאים כל כך גבוהים ב-$\lvert C_{\text{ol}}(j\omega) \rvert$ נהיית יותר ברורה כאשר אנו ניזכר בהגדרה $C_{\text{ol}}=T_{\text{ref}}/P$, וב-$T_{\text{ref}}$ שדרשנו:
> ![[{D725CC04-FB82-441F-A743-E4C4F7F74C7E}.png|bookhue|500]]
> >תגובת תדירות של $T_{\text{ref}}$ ו-$P$ -דיאגרמת בודה-הגבר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> ניתן לראות שכאשר $\lvert C_{\text{ol}}(j\omega) \rvert>1$ אז גם $\lvert T_{\text{ref}}(j\omega) \rvert>\lvert P(j\omega) \rvert$, שזה נובע ישירות גם מההגדרה.

נרצה לדעת האם יש עוד תנאי שנוכל לדרוש על $T_{\text{ref}}$ בבחירה שלנו כדי להימנע ממאמץ בקרה עודף - נרצה לדעת האם יש תנאי כללי שנוכל להכתיב עליו שיגרום לכך ש- $\lvert C_{\text{ol}}(j\omega) \rvert\leq 1$.

ניתן לראות בדוגמה האחרונה (בגרף האחרון, יש גם גרף של $P$) של-$\lvert P(j\omega) \rvert$ יש שיפוע של בערך $\pu{-40dB/dec}$ עבור $5.311<\omega<50$, ושיפוע $\pu{-20dB/dec}$ עבור $\omega>50$.
לכן, הדעיכה של $\lvert P(j\omega) \rvert$ הרבה יותר מהירה מאשר הדעיכה של $\lvert T_{\text{ref}}(j\omega) \rvert$ לרוחב של בערך decade שלמה. בנוסף, חוסר איזון זה מתרחש מעבר לרוחב פס $\omega_{b}$ של $T_{\text{ref}}$ לכל $\tau$ (שוב, ראו את הגרף האחרון בדוגמה הקודמת).
נסיק, שאולי, אם נדרוש על $T_{\text{ref}}$ ש- $\omega_{b}<50$, אז, אולי, נקבל מאמץ בקרה יותר הגיוני ליישום.

>[!example] דוגמה: 
> עם אותה המערכת מהדוגמה הקודמת, נבחר $T_{\text{ref}}$ מסדר שני כדי לקיים $\omega_{b}>50$:
> $$T_{\text{ref}}(s)=\dfrac{{{\omega_{n}}^{2}}}{s^{2}+\sqrt{ 2 }\omega_{n}s+{\omega_{n}}^{2}}$$
> למערכת זו רוחב פס מיוחד המקיים $\omega_{b}=\omega_{n}$, והיא נקראת פילטר Butterworth. במקרה זה:
> $$C_{\text{ol}}(s)=\dfrac{T_{\text{ref}}(s)}{P(s)}=\dfrac{(ms^{2}+cs+k){\omega_{n}}^{2}}{\rho(cs+k)(s^{2}+\sqrt{ 2 }\omega_{n}s+{\omega_{n}}^{2})}$$
> שהוא יציב לכל $\omega_{n}$, שהוא הדרגת חופש שלנו (מקודם היה לנו את $\tau$, עכשיו זה $\omega_{n}$).
> ![[{E44AEE76-9110-4EA3-8707-FB571571BA0F}.png|bookhue|600]]
> התגובות מדרגה:
> ![[{8BBFF4DD-1A32-4EE5-9830-2405E54D3302}.png|bookhue]]
> >תגובות מדרגה במערכת החדשה. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> עדיין, האצה של $y$ דורשת מאמץ בקרה יותר גבוה, ואם נביט בתגובת תדירות
> ![[{39BD521F-F035-40C3-8CE7-B81D7F9C456E}.png|bookhue|500]]
> >תגובת תדירות של $C_{\text{ol}}$ - דיאגרמת בודה-הגבר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> נראה שככל ש-$\omega_{n}$ עולה, השיאים של $\lvert C_{\text{ol}}(j\omega) \rvert$ גדלים.
> אבל, כאשר נביט גם בתגובת תדירות של $T_{\text{ref}}(j\omega)$:
> ![[{2B88CF69-95E8-4122-98F3-0777267EF7D4}.png|bookhue|500]]
> >תגובת תדירות של $T_{\text{ref}}$ ו-$P$ -דיאגרמת בודה-הגבר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].
> 
> אנו רואים ש- $\lvert C_{\text{ol}}(j\omega) \rvert$ מתחילה לגדול מעל $\lvert C_{\text{ol}}(0) \rvert$ כאשר הרוחב פס $\omega_{b}$ מתחיל לעבור את הרוחב פס של $P(s)$.

משתי הדוגמאות לעיל נסיק שככלל אצבע:
>[!notes] טיפ:
> - כדאי לדרוש מודל ייחוס שהרוחב פס שלו לא עולה על הרוחב פס של התהליך, כי זה לרוב דורש מאמץ בקרה גדול לאמץ את התהליך להגיב מהר יותר מהמהירות תגובה הטבעית שלו (בהנחה ולשניהם יש מבנה low-pass).

# תרגילים

## תרגיל 1
![[{1C7C22E7-91B1-4D60-B35E-048736A853F7}.png|bookhue]]
>מפות קטבים-אפסים ותגובות מדרגה. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

התאימו בין המפות קטבים-אפסים והתגובות מדרגה באיורים.

**פתרון**:
ניתן לראות מהמיקומי קטבים ${P}_{i}$ איזה מהמערכות הן מסדר ראשון ואיזה מסדר שני. מבחינת התגובות מדרגה $G_{i}$ נוכל להסיק איזה סדר המערכת מהשיפוע שלו בהתחלה. ל- ${G}_{1},{G}_{2},{G}_{4}$ כולם יש שיפוע התחלתי אפס (אצל ${G}_{1}$ יותר קשה לראות, אבל הוא קיים), מה ש[[#ניתוח מערכות מסדר ראשון ושני|מעיד על כך]] שהם מסדר שני.
עבור ${G}_{1}$, שכבר הבנו שיש לה שני קטבים, נשים לב שהיא תת-מרוסנת, כך ששני הקטבים שלה הם ממשיים ב-LHP, ולכן:
$${P}_{3} \leftrightarrow {G}_{1}$$

מבחינת ${G}_{2}$ ו-${G}_{4}$, נותר לנו רק את ${P}_{2}$ ו-${P}_{4}$ מבחינת מערכות מסדר שני. נשים לב של-${P}_{4}$ קטבים שרחוקים פי $2$ מהקטבים של ${P}_{2}$, אבל יש להם את אותו החלק המדומה. כלומר, ל-${P}_{4}$ יחס $\dfrac{\lambda_{r}}{\lambda_{i}}$ יותר גדול, מה ש[[#ניתוח מערכות מסדר ראשון ושני|מעיד]] על כך שיש ל-${P}_{4}$ $\mathrm{OS}$ יותר קטן, ופחות תנודות. נסיק ש:
$${P}_{4} \leftrightarrow {G}_{2}\qquad \text{and}\qquad {P}_{2}\leftrightarrow {G}_{4}$$
מבחינת מערכות מסדר ראשון, יש לנו את ${G}_{3}$ ו-${G}_{5}$, עם ${P}_{1},\,{P}_{5}$. ל-${P}_{5}$ קוטב יותר רחוק, מה שמעיד על תגובה מהירה יותר. לכן:
$${P}_{5}\leftrightarrow {G}_{5}\qquad \text{and}\qquad {P}_{1}\leftrightarrow {G}_{3}$$

נשים לב גם שב-${P}_{3}$ הקוטב הדוימננטי הוא הקוטב שגם מופיע ב-${P}_{1}$, כך שנצפה שהתגובות תדירויות שלהם יהיו דומות - אכן, ${G}_{1}$ ו-${G}_{3}$ דומות.

## תרגיל 2

![[{90184900-10B8-4770-867B-85A5765B5400}.png|bookhue]]
>תגובות מדרגה ודיאגרמות בודה-הגבר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

התאימו בין התגובות מדרגה לדיאגרמות בודה.

**פתרון**:
אנו יודעים שלמערכות עם גרף בודה-הגברש יורד מונוטונית יש בדרך כלל תגובות מדרגה לא תונדות. בנוסף, ככל שרוחב הפס רחב יותר, התגובת מדרגה מהירה יותר. מבין הגרפי בודה, ה-${P}_{1},{P}_{4}$ ו-${P}_{5}$ הם מונוטונים, מה שתואם ל-${S}_{2},{S}_{4}$ ו-${S}_{5}$. מביניהם, ל-${P}_{1}$ יש את הרוחב פס הכי גדול, ולכן הוא מתאים לתגובת מדרגה הכי מהירה, ${S}_{4}$:
$${P}_{1}\leftrightarrow {S}_{4}$$
מבחינת ${P}_{4}$ ו-${P}_{5}$, נשים לב של-${P}_{5}$ יש שיפוע של בערך $\pu{-40dB/decade}$ (עודף של 2 קטבים), בעוד ל-${P}_{4}$ השיפוע הוא כ- $\pu{-20dB/decade}$ (עודף של קוטב אחד). במקרה של עודף אחד נצפה לראות שיפוע התחלתי שאינו אפס (נובע ממשפט הערך ההתחלתי). עבור עודף קטבים גדול יותר, נצפה לראות שיפוע התחלתי אפס. מאחר ול-${S}_{2}$ שיפוע התחלתי אפס, נסיק כי:
$${P}_{5}\leftrightarrow {S}_{2}\qquad  \text{and}\qquad  {P}_{4}\leftrightarrow {S}_{5}$$

למערכות עם תהודות צרות יש בדרך כלל תגובות מדרגה תונדות, עם תדירויות הקרובות לתדירות התהודה. מבין ${P}_{2}$ ו-${P}_{3}$, ל-${P}_{3}$ יש תדירות תהודה יותר נמוכה, ולכן הוא מתאים יותר ל-${S}_{3}$ שעם תדירות נמוכה יותר מ-${S}_{1}$.
$${P}_{3}\leftrightarrow {S}_{3}\qquad \text{and}\qquad {P}_{2}\leftrightarrow {S}_{1}$$

## תרגיל 3
הביטו במערכת הבאה:


![[Screenshot_20241204_113551_Samsung Notes.jpg|bookhue|300]]
>סכימת המערכת. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

שתי מסות $m=\pu{1kg}$ מחוברות ע"י גלגלת חסרת מסה וקפיץ בעל קבוע קפיץ $k=\pu{1N/m}$, ומקדם חיכוך $c=\pu{0.1N.s/m}$. המגע בין המסות מייצר כוח חיכוך שפרופורציונאלי במהירות, עם מקדם $c_{m}$, נגד כיוון התנועה. ההעתק של המסה הימנית הוא הקלט $u$ וההעתק של המסה השמאלית הוא הפלט $y$. המערכת נשלטת ע"י בקר בחוג פתוח עם בקר $C_{\text{ol}}:r\to u$ ותגובה מבוקרת $T_{yr}: r\to y$ עבור אות ייחוס $r$.

### סעיף א'
אם המסות לא נוגעות אחת בשנייה (כלומר, אין כוח חיכוך הפועל ביניהם, עם $c_{m}=0$), אז לתהליך ${P}_{0}:u\to y$ יש את הפונקציית תמסורת:
$${P}_{0}(s)=\dfrac{cs+k}{ms^{2}+cs+k}$$
מדלו את הבקר $C_{\text{ol}}$ עבורו לתגובות המבוקרות לאות ייחוס $r$ יהיה את פונקציית התמסורת:
$$T_{yr 1}(s)=\dfrac{1}{\tau s+1}$$
תחת אלו תנאים על $\tau$ המערכת היא יציבה פנימית?

**פתרון**:
עם התהליך הנתון והמערכת הרצויה $T_{yr 1}$, נסיק כי:
$$\begin{aligned}
C_{\text{ol}}(s) & =\dfrac{T_{yr 1}(s)}{P_{0}(s)} \\[1ex]
 & =\dfrac{ms^{2}+cs+k}{(cs+k)(\tau s+1)}
\end{aligned}$$
מערכת זו:
- היא proper אמ"ם $\tau \neq 0$.
- יציבה רק אם $\tau>0$, כי אז כל הקטבים שלו יהיו ב-LHP.

עבור $P(s)$, היא מערכת strictly proper וגם יציבה.
לפיכך המערכת יציבה פנימית אמ"ם $\tau>0$.

### סעיף ב'
שרטטו את התגובות מדרגה של $u$ ו-$y$ עבור $\tau \in \{ 0.1,\,0.5,\,1,\,10 \}[\pu{s}]$.
**פתרון**:
![[{1B10DE29-7370-473F-88BD-4D39F3E97C96}.png|bookhue|500]]
>תגובת מדרגה של ${P}_{0}C_{\text{ol}}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

![[{77990BFB-0C4A-41FF-86D4-EF94DF8EA278}.png|bookhue|500]]
>תגובת מדרגה של $C_{\text{ol}}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].


ניתן לראות שכאשר קבוע הזמן של המערכת המבוקרת, $\tau$, יורדת, התגובה של $y$ מהירה יותר, כפי שמצופה ממערכת מסדר ראשון $T_{yr 1}$. אבל, כפי שניתן לראות מהגרף השני, תגובה מהירה יותר דורשת יותר מאמץ גבוה יותר.
ניתן לראות זאת גם מהדיאגרמת בודה-הגבר של הבקר בגרף הבא:
![[{005EB08E-1F9B-48FC-95E2-49F9D1899BFA}.png|bookhue|500]]
>דיאגרמת עוצמה-בודה של $C_{\text{ol}}=P_{0}^{-1}T_{yr 1}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ההגבר הגדול בתדירויות הגבוהות אחראי לשיאים הגבוהים בהתחלה - הרגע בו המדרגה מופעלת. העלייה בעוצמה $\lvert C_{\text{ol}}(j\omega) \rvert$ בתדירויות הגבוהות מוסברות ע"י ההשוואה בין ההתנהגות של $\lvert T_{yr 1}(j\omega) \rvert$ ו-$\lvert {P}_{0}(j\omega) \rvert$ בתדירויות הגבוהות:

![[{2310CD0E-020B-4559-BCA9-600E16AC5FB8}.png|bookhue|500]]
>דיאגרמת עוצמה-בודה של ${P}_{0}$ ו-$T_{yr 1}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

אנו יכולים לראות שב-$\tau$ קטן, $\lvert T_{yr 1}(j\omega) \rvert$ קטן משמעותית לאט יותר מאשר $\lvert {P}_{0}(j\omega) \rvert$. לכן, היחס ביניהם, שהוא $\lvert C_{\text{ol}}(j\omega) \rvert$, גדל.
### סעיף ג'
נניח כעת שאנו צריכים שהשגיאת מצב מתמיד בין $r$ ו-$y$ עבור גם $r(t)=\mathbb{1}(t)$ וגם $r(t)=\sin(\omega_{r}t+\phi_{r})\mathbb{1}(t)$ עבור $\omega_{r}>0$ נתון, ולכל $\phi_{r}\in \mathbb{R}$. דרשו ש
$$T_{yr 2}(s)=\dfrac{{{\alpha}_{2}s^{2}+{\alpha}_{1}\omega_{n}s+{\alpha}_{0}{\omega_{n}}}^{2}}{((\beta /\omega_{n})s+1)(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})}$$
עבור $\omega_{n}=1,\,\zeta=3,\,\beta=2$ ו- $\alpha_{i}\in \mathbb{R},\,i \in \{ 0,1,2 \}$. האם ה-$C_{\text{ol}}$ המתקבל יציב?

**פתרון**:
כדי להבטיח שהמערכת המבוקרת היא $T_{yr 2}$, נדרוש שוב ש- $C_{\text{ol}}={P}_{0}^{-1}T_{yr 2}$. לכן:
$$C_{\text{ol}}(s)=\dfrac{({{\alpha}_{2}s^{2}+{\alpha}_{1}\omega_{n}s+{\alpha}_{0}{{\omega_{n}}}^{2}})(ms^{2}+cs+k)}{((\beta /\omega_{n}s)s+1)(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})(cs+k)}$$
הפונקציית תמסורת הזו היא proper (מונה ממעלה רביעית, מכנה ממעלה רביעית), וכלל הקטבים שלו, $s=-\omega_{n}/\beta,\,s=(\zeta\pm\sqrt{ \zeta ^{2}-1 })\omega_{n}$ ו- $s=-k/c$ כולם ב-LHP. לכן, $C_{\text{ol}}$ יציבה, ומאחר וגם $P_{\text{ol}}$ יציבה, מערכת הבקרה יציבה פנימית.

נדרוש כעת שהשגיאה היא אפסית במצב מתמיד לאות ייחוס עם תדירות $\omega_{r}$. [[#תגובה במצב מתמיד|לכן, נדרוש ש]]:
$$T_{yr2}(0)=1,\, \qquad T_{yr 2}(j\omega_{r})=1,\, \qquad T_{yr 2}(-j\omega_{r})=1$$
בגלל ההגבר של $T_{yr 2}$, אז אנו יודעים ש-$T_{yr}(0)={\alpha}_{0}$. לכן:
$${\alpha}_{0}=1$$
כעת נעבור לתנאים על $j\omega_{r}$ ו-$-j\omega_{r}$. נתחיל מלהציב $s$ כללי במקום ישירות $j\omega_{r}$ או $-j\omega_{r}$ מסיבות שנראה בהמשך. כלומר, נדרוש ש:
$$\begin{gathered}
T_{yr 2}(s)=1
\end{gathered}$$
נציב את $T_{yr 2}$:
$$\begin{gathered}
{{\alpha}_{2}s^{2}+\alpha\omega_{n}s+{\omega_{n}}}^{2}=[(\beta /\omega_{n})s+1](s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}) \\[1ex]
{\alpha}_{2}s^{2}+{\alpha}_{1}\omega_{n}s=\dfrac{\beta}{\omega_{n}}s^{3}+(1+2\beta \zeta)s^{2}+(\beta+2\zeta)\omega_{n}s \\[1ex]
\dfrac{s}{\omega_{n}}{\alpha}_{2}+{\alpha}_{1}=\left( 1+\dfrac{s^{2}}{{\omega_{n}}^{2}}\right)\beta+2\zeta+\dfrac{s}{\omega_{n}}(1+2\beta \zeta)
\end{gathered}$$
נציב $s=j\omega_{r}$, החלקים הממשיים והמדומים של המשוואה מופרדים באופן מאוד יפה:
$${\alpha}_{1}+j \dfrac{\omega_{r}}{\omega_{n}}{\alpha}_{2}=\left( 1-\dfrac{{\omega_{r}}^{2}}{{\omega_{n}}^{2}} \right)\beta+2\zeta+j \dfrac{\omega_{r}}{\omega_{n}}(1+2\beta \zeta)$$
מ"השוואת מקדמים":
$$\boxed{{\alpha}_{1}=\left( 1-\dfrac{{\omega_{r}}^{2}}{{\omega_{n}}^{2}} \right)\beta+2\zeta,\, \qquad {\alpha}_{2}=1+2\beta \zeta }$$
נקבל את דיאגרמת הבודה:
![[{CE660A45-12EE-412D-89D9-E6926BB5C2BD}.png|bookhue|500]]
>דיאגרמת בודה של $T_{yr 2}$ עבור $\omega_{n}=1,\,\zeta=3,\,\beta=2$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ניתן לראות מהגרף לעיל שבאמת לבקר $T_{yr 2}$ יש הגבר $\pu{0dB}=1$ עבור פונקציית מדרגה ($\omega=0$) והתדירות הרצויה $\omega_{r}$. בנוסף, הוא גם לא מוסיף או מחסיר מהפאזה בתדירויות אלו, שזאת בזכות הדרישה ש- $T_{yr 2}(-j\omega)=1$.



### סעיף ד'
כעת, הניחו שהמסות נוגעות אחת בשנייה, ויוצרים כוח חיכוך ביניהם עם מקדם $c_{m}=\pu{0.5N.s/m}$. מצאו את משוואות התנועה של המערכת $P_{c_{m}}:u\to y$ במקרה זה.

**פתרון**:
משוואת התנועה החדשה היא:
$$m\ddot{y}+(c+c_{m})\dot{y}(t)+ky(t)=(c-c_{m})\dot{u}(t)+ku(t)$$
לכן פונקציית התמסורת של המערכת היא:
$$P_{c_{m}}(s)=\dfrac{(c-c_{m})s+k}{ms^{2}+(c+c_{m})s+k}$$
כיוון ש- $c_{m}>c$, נשים לב מהמונה שיש לנו אפס ימני (אפס שנמצא ב-RHP) - מה שנקרא גם שהמערכת ב- nonminimum-phase.

### סעיף ה'
שרטטו סכמתית את התגובת מדרגה של המערכת.

**פתרון**:
![[{E1F4DEE3-D01D-4C97-AFD1-CD1982FFE086}.png|bookhue|500]]
>תגובת מדרגה של $P_{c_{m}}$ (בכחול) כאשר $c_{m}>c$. הקו האדום מייצג תגובת מדרגה של מערכת מסדר שני תת-מרוסנת עם שני קטבים שמאליים, וללא אפסים. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

# תרגיל 4
הביטו בבקר בחוג פתוח הבא:
![[{F9DF3806-6FD9-47DE-91C1-E7156FFDD7F1}.png|bookhue|400]]
כאשר התהליך:
$$P(s)=\dfrac{0.2s+1}{(0.5s+1)(s^{2}+0.2s+1)}$$
### סעיף א'
האם תהליך זה ניתן לבקרה ע"י השימוש ב[[#מודל ייחוס]]? אם כן, מהם התנאים למודל ייחוס זה כדי להבטיח את היציבות הפנימית של מערכת הבקרה?

**פתרון**:
לפי [[#מודל ייחוס]], אנו רוצים ש:
1. התהליך $P(s)$ יציב BIBO - מתקיים כי $P(s)$ הוא proper וכל הקטבים שלו ב-OLHP.
2. כל אפס ימני של $P(s)$ הוא גם יהיה אפס ימני של $T_{\text{ref}}(s)$ - נוכל לקיים, כי אין אפסים ימניים ל-$P(s)$.
3. עודף הקטבים של המודל ייחוס יהיה לפחות כמו עודף הקטבים של $P(s)$ - נוכל לקיים.

### סעיף ב'
הביטו במודל ייחוס מסדר שני $T_{\text{ref}}:r\to y$ עם הפונקציית תמסורת:
$$T_{\text{ref}}(s)=\dfrac{{\omega_{n}}^{2}}{s^{2}+\sqrt{ 2 }\omega_{n}s+{\omega_{n}}^{2}}$$
(לפונקציית תמסורת זו רוחב פס $\omega_{b}=\omega_{n}$). מה יהיה ה-$C_{\text{ol}}$? האם הוא קביל?

**פתרון**:
נחשב את $C_{\text{ol}}$:
$$\begin{aligned}
C_{\text{ol}}(s) & =T_{\text{ref}}(s)\cdot \dfrac{1}{P(s)} \\[1ex]
 & =\dfrac{{\omega_{n}}^{2}(0.5s+1)(s^{2}+0.25+1)}{(0.2s+1)(s^{2}+\sqrt{ 2 }\omega_{n}s+{\omega_{n}}^{2})}
\end{aligned}$$
הבקר הוא proper וכל קטביו נמצאים ב-OLHP. בנוסף, אין צמצומים לא יציבים ולכן הבקר תקין והמערכת יציבה פנימית.
### סעיף ג'
שרטטו את התגובות מדרגה של $y$ ו-$u$ והדיאגרמות בודה של המודל ייחוס והתהליך עצמו.

**פתרון**:

![[Pasted image 20241210233406.png|bookhue]]
>תגובות תדירות של $T_{\text{ref}}$ ו-$P$. הקו המקווקו ב-(c) הוא התהליך עצמו. הסיבה שיש שם Resonance זה מהיחס ריסון קטן מ-$1/\sqrt{ 2 }$ במכנה של $P(s)$. 

