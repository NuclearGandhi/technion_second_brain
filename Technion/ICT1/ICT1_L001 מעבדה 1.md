---
aliases:
---

|                   | סטודנט א'                      | סטודנט ב'                          |
| ----------------- | ------------------------------ | ---------------------------------- |
| **שם**            | עידו פנג בנטוב                 | יובל הנדל                          |
| **ת"ז**           | 322869140                      | 211828587                          |
| **דואר אלקטרוני** | ido.fang@campus.technion.ac.il | yuval.hendel@campus.technion.ac.il |


מספר תחנה: 4
תמסורת: 6221

קוד `MATLAB` נמצא ב[GitHub](https://github.com/NuclearGandhi/technion_second_brain/tree/master/Technion/ICT1/ICT1_L001/code).


<div><hr><hr></div>

# 2 תהליך הניסוי

## 2.1 קריאת ה-Encoder

### שאלה 4
**מהו הכיוון החיובי של ה-encoder?**
ממבט-על על המערכת, ה-encoder חיובי עבור סיבוב עם כיוון השעון.

**האם הקריאות בדידות או רציפות? למה?**
הקריאות הן בדידות, וזה נובע מעצם אופן הפעולה של encoder. יש בו פיזית שנתות, ועבור כל אחת מהן, ה-encoder יודע להוציא רק ארבעה ערכים (בדידים) - אור, מעבר מאור לחושך, חושך, ומעבר מחושך לאור.

**מה נוכל להסיק מעובדה זו ביחס לשגיאות המדידה והתנהגות המערכת?**
מאחר והקריאות בדידות, הבקר לא יוכל להגיב בצורה מדויקת, ולפיכך יהיה לו מאוד קשה להגיע לנקודת שיווי משקל. במקרה למשל של מטוטלת הפוכה, בה קיימת נקודת שיווי משקל לא יציבה, הדיוק ככל הנראה לא יספיק על מנת להביא את המערכת ליציבות.

### שאלה 5
מסיבוב $360^{\circ}$ קיבלנו $\pu{9000}$ פולסים. כלומר, כל פולס הוא $0.04^{\circ}$.
מאחר ובתחנה שלנו יש 500 שנתות, וארבעה פולסים עבור כל שנתה, נסיק שיחס התמסורת הוא:
$$\begin{gathered}
{n}_{g}=\dfrac{9000}{2000} \\[1ex]
\boxed{{n}_{g}=4.5 }
\end{gathered}$$

### שאלה 6
לפי ה[[ICT1_HW001 פרויקטון 1|פרויקטון]], קיבלנו ש:
$$
{P}_{\theta}(s)=\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}$$
ננרמל לצורה הסטנדרטית:
$${P}_{\theta}(s)=\dfrac{\dfrac{{n}_{g}{K}_{m}}{Rf+{{{n}_{g}}}^{2}{K}_{m}{K}_{b}}}{s\left( \dfrac{RJ}{Rf+{{{n}_{g}}}^{2}{K}_{m}{K}_{b}}s+1 \right)}$$
כך ש:
$${k}_{s}:=\dfrac{{n}_{g}{K}_{m}}{Rf+{{{n}_{g}}}^{2}{K}_{m}{K}_{b}},\qquad \tau=\dfrac{RJ}{Rf+{{{n}_{g}}}^{2}{K}_{m}{K}_{b}}$$

מהקטלוג, הפרמטרים עבור המנוע שלנו:
$${K}_{m}={K}_{b}=\pu {0.0242 N.m},\qquad R=\pu {2.21 \Omega}$$
נציב את שאר הנתונים ונקבל את פונקציית התמסורת ביחידות של רדיאנים לוולט:
$$
{P}_{\theta}(s)=\dfrac{\Theta(s)}{V(s)}\approx \dfrac{3.8326}{s(0.3556s+1)}\,\pu{rad/V}
 $$
 ביחידות של מעלות לוולט, זה יהיה:
 $${P}_{\theta}(s)= \dfrac{219.59}{s(0.3556s+1)}\,\pu{deg/V}$$
 

<div><hr><hr></div>

## 2.2 בקר P
### שאלה 11
מהפרויקטון, עבור בקר פרופורציוני, מצאנו שה[[ICT1_006 שיטת מקום גאומטרי של שורשים#ייצוג מג"ש של הפולינום האופייני|ייצוג מג"ש]]:
$$\begin{gathered}
{\mathcal{X}}_{\text{cl}}=0 \\[1ex]
1+C(s)P(s)=0 \\[1ex]
1+\dfrac{{k}_{p}{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}=0 \\[1ex]
-\dfrac{1}{{k}_{p}}=:{G}_{k}(s)=\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}
\end{gathered}$$

לכן הקטבים בחוג הפתוח:
$${s}_{1}=0,\, {s}_{2}=-\dfrac{{{n}_{g}}^{2}{K}_{m}{K}_{b}+Rf}{RJ}$$


- עבור ${k}_{p}>0$:
	מאחר ויש מספר אי זוגי של שורשים מימין, בין ${s}_{1}$ ו-${s}_{2}$, נסיק כי יש ענף על [[ICT1_006 שיטת מקום גאומטרי של שורשים#מג"ש על הציר הממשי|הציר הממשי]], בין ${s}_{1}$ ל-${s}_{2}$. בנוסף, יש עודף של שני קטבים, ולכן ישנם שתי [[ICT1_006 שיטת מקום גאומטרי של שורשים#אסימפטוטות|אסימפטוטות]] בזוויות $\pm \pi /2$.
	![[q4_1.png|bookhue|500]]
	>מג"ש המערכת עבור ${k}_{p}>0$.
	
	נסיק שהמערכת יציבה עבור כל ${k}_{p}>0$.

<div><hr><hr></div>

- עבור ${k}_{p}<0$:
	מאחר ויש מספר זוגי של שורשים מימין ל-${s}_{1}$ ומשמאל ל-${s}_{2}$ נסיק כי יש ענף על הציר הממשי מימין ל-${s}_{1}$ ומשמאל ל-${s}_{2}$. בנוסף, יש עודף של שני קטבים, ולכן ישנם שתי אסימפטוטות בזוויות $0,\,\pi$.
	![[q4_2.png|bookhue|500]]
	>מג"ש המערכת עבור ${k}_{p}<0$.
	
	נסיק שהמערכת לא יציבה עבור כל ${k}_{p}<0$.

### שאלה 12
**עבור ${k}_{p}=0.05$**:
![[q12_k_p_005_combined.png|bookhue]]
>תגובת הזווית והמתח לכניסת מדרגה $r=30^{\circ} \mathbb{1}$ עם ${k}_{p}=0.05$.

מהקוד `MATLAB` אנו מקבלים ש:
```
Performance Metrics for k_p = 0.05:
Steady-State Error: 4.56
Settling Time: 1.0727
Overshoot: 0%
Rise Time: 0.6142
Max Input Voltage: 1.4873
```

<div><hr><hr></div>

**עבור ${k}_{p}=0.36$**:
![[q12_k_p_036_combined.png|bookhue]]
>תגובת הזווית והמתח לכניסת מדרגה $r=30^{\circ} \mathbb{1}$ עם ${k}_{p}=0.36$.

```
Performance Metrics for k_p = 0.36:
Steady-State Error: 1.32
Settling Time: 2.1683
Overshoot: 69.0932%
Rise Time: 0.092637
Max Input Voltage: 7.5898
```

### שאלה 13
עבור כל אחד מהמאפיינים:
- מבחינת השגיאה במצב מתמיד, אנו יכולים לראות שככל ש-${k}_{p}$ יותר גדול, כך השגיאה קטנה. ראינו זאת גם ב[[ICT1_007 משוב בהגברים גבוהים#שגיאה עבור הפרעת מדרגה|הרצאה]] (למשל עבור הפרעת מדרגה במצב מתמיד):
	$${e}_{\text{ss}}=\dfrac{1}{\lvert 1/P(0)+C(0) \rvert }=\dfrac{1}{\lvert C(0) \rvert }$$
	כלומר, ככל שההגבר הסטטי של $C(s)$ יותר גדול, כך נקבל ${e}_{\text{ss}}$ יותר קטן.
- מבחינת ה-settling time, אנו רואים שככל ש-${k}_{p}$ יותר גדול, לוקח יותר זמן למערכת להגיע למצב מתמיד. בהרצאה ראינו שעבור הגבר ${k}_{p}$ גבוה יותר מקבלים רוחב פס רחב יותר, שמאריך את ה- settling time.
- מבחינת ה-overshoot, אנו רואים שככל ש-${k}_{p}$ גדל, כך גם ה-$\mathrm{OS}$ גדל. ב[[ICT1_008 עיצוב חוג#ביצועים בתגובת מעבר|הרצאה]], באמת ראינו שככל שהרזוננס של $T(j\omega)$ יותר גבוה, נקבל $\mathrm{OS}$ יותר גדול. ואכן, הרזוננס של $T(j\omega)$ יותר גבוה עבור ערכי ${k}_{p}$ גדולים יותר. (בהרצאה ראינו שככל שה-$k$ עולה ב-$L(s):=P(s)C(s)$, כך גם הרזוננס של $T(j\omega)$).
- מבחינת ה-rise time, ניתן לראות שככל ש-${k}_{p}$ גדל, ה-rise time קטן. אנו יודעים מההרצאה שככל שרוחב הפס של $T(j\omega)$ יותר רחב, נקבל תגובה מהירה יותר, כלומר rise time נמוך יותר. ואכן, כאשר ${k}_{p}$ גדל, רוחב הפס של $T(j\omega)$ עולה, ולכן אנו מקבלים תגובה מהירה יותר.
- מבחינת המתח המקסימלי, אנו מקבלים שככל ש-${k}_{p}$ עולה, המתח המקסימלי גם עולה. ראינו זאת גם בהרצאה - ככל שרוחב הפס של $T(j\omega)$ יותר רחב (כפי שהסברנו, זה באמת קורה כאשר ${k}_{p}$ גדל), כך מאמץ הבקרה בחוג הסגור עולה.

### שאלה 14
באופן איכותי, אנו רואים מהמדידות שעבור ${k}_{p}=0.05$ קיבלנו מערכת מרוסנת-יתר, בעוד עבור ${k}_{p}=0.36$ המערכת תת-מרוסנת. מדידות אלו תואמים לחישובים מה[[ICT1_HW001 פרויקטון 1#שאלה 4#סעיף ג'|פרויקטון]]:
$$\begin{gathered}
\zeta=\dfrac{1}{2} \sqrt{ \dfrac{1}{RJ{n}_{g}{K}_{m}{k}_{p}} } (Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})
\end{gathered}$$
נציב ערכים ונקבל:
$$\begin{aligned}
 & {k}_{p}=0.05: &  & \zeta=1.9153 &  & \implies \text{overdamped} \\[1ex]
 & {k}_{p}=0.36: &  &  \zeta =0.7138    &  & \implies \text{underdamped}
\end{aligned}$$
בנוסף, בשתי המדידות קיבלנו מערכות יציבות, שכפי שראינו ב[[#שאלה 11]], זה הגיוני, כי ${k}_{p}>0$.

### שאלה 15
קיבלנו שגיאה במצב מתמיד בעיקר בגלל הפרעות, שגיאות מדידה, ואי-דיוקים בפרמטרי המערכת - העובדה שאנו עובדים עם בקר פרופורציוני לא כל כך עוזרת. למשל, כפי שהוסבר ב[[#שאלה 13]] על הפרעת מדרגה, אנו נקבל שגיאה לא אפסית במצב מתמיד כתלות בהגבר הסטטי על הבקר. שגיאות ואי דיוקים אחרים עלולים להחמיר עוד יותר את בעיה זו.

### שאלה 16
בניסוי קיבלנו $\zeta\approx0.69$ עבור ערך ${k}_{p}=0.048$. תאורטית, מצאנו בפרויקטון שהביטוי ל-${k}_{p}$ כתלות בריסון הוא:
$${k}_{p}=\dfrac{1}{4\zeta ^{2}} \dfrac{1}{RJ{n}_{g}{K}_{m}}(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})^{2}$$
נציב נתונים, ונקבל שעבור $\zeta=0.69$:
$${k}_{p}=\pu{0.3853V/rad}$$
אנו רוצים לעבוד ביחידות של מעלות, ולכן:
$${k}_{p}=\pu {0.0067 V/deg}$$
כלומר, כדי לקבל את הריסון הדרוש, בפועל היינו צריכים הגבר יותר גבוה מאשר בתאוריה כי יש שגיאות במידול התהליך (הזנחנו השראות, חיכוך לא לינארי וכ'ו) בנוסף להפרעות ושגיאות מדידה.
![[q16_k_p_0048_crticial.png|bookhue]]
>תגובות זווית ומתח בפועל ותאורטיות לקבלת $\zeta=0.69$.


<div><hr><hr></div>

## 2.3 בקר PI

### שאלה 17
מהפרויקטון:
עבור הבקר $C(s)={k}_{p}\left( 1+\dfrac{{k}_{i}}{s} \right)$, נבנה את הייצוג מג"ש:
$$\begin{gathered}
{\mathcal{X}}_{\text{cl}}=0 \\[1ex]
1+C(s)P(s)=0 \\[1ex]
1+{k}_{p}\left( 1+\dfrac{{k}_{i}}{s} \right) \dfrac{{k}_{s}}{s(\tau+1)}=0 \\[1ex]
-\dfrac{1}{{k}_{p}}=\dfrac{(1+{k}_{i}/s){k}_{s}}{s(\tau+1)} \\[1ex]
-\dfrac{1}{{k}_{p}}=:{G}_{k}(s)=\dfrac{(s+{k}_{i}){k}_{s}}{s^{2}(\tau s+1)}
\end{gathered}$$

יש לנו אפס אחד ב- ${z}_{1}=-{k}_{i}$, ושלושה קטבים, שניים מהם על הראשית ${p}_{1,2}=0$, והשלישי ב- ${p}_{3}=-1/\tau$. לכן, נקבל דיאגרמות שונות כתלות במיקום ${z}_{1}$ יחסית ל-${p}_{3}$. כלומר, נפרק למקרים הבאים:

![[Technion/ICT1/ICT1_HW001/code/figs/q5_1.png|bookhue]]
>דיאגרמת מג"ש עבור ערכי ${k}_{p}$ ו-${k}_{i}$ שונים.


אנו לא בחנו את ${k}_{i}<0$ כי אז נקבל אפס חיובי (${z}_{1}>0$), כך שתמיד יהיו קטבים ב-RHP.
גם לא בחנו את ${k}_{i}=0$ כי במקרה זה הייצוג מג"ש:
$${G}_{k}=\dfrac{{k}_{s}}{s(\tau s+1)}$$
שזה זהה למקרה של ה[[#2.2 בקר P|בקר P]].

קיבלנו שהמערכת תהיה יציבה רק אם:
$$
{k}_{p}>0 \qquad \text{and} \qquad 0<{k}_{i}<\dfrac{1}{\tau} $$
נציב נתונים:
$$\boxed {
{k}_{p}>0 \qquad \text{and} \qquad 0<{k}_{i}<2.8119
 } $$
### שאלה 18
**עבור ${k}_{i}=0.1$**:
![[q18_k_i_01_combined.png|bookhue]]
>תגובת הזווית והמתח לכניסת מדרגה $r=30^{\circ} \mathbb{1}$ עם ${i}_{p}=0.1$.


```
Performance Metrics for k_i = 0.1:
Steady-State Error: 0.04
Settling Time: 2.598
Overshoot: 77.6298%
Rise Time: 0.091912
Max Input Voltage: 7.5842
```

**עבור ${k}_{i}=1.1$**:
![[q18_k_i_11_combined.png|bookhue]]
>תגובת הזווית והמתח לכניסת מדרגה $r=30^{\circ} \mathbb{1}$ עם ${k}_{i}=1.1$.

```
Performance Metrics for k_i = 1.1:
Steady-State Error: 0.04
Settling Time: 7.941
Overshoot: 87.217%
Rise Time: 0.089178
Max Input Voltage: 8.3839
```

### שאלה 19
עבור כל אחד מהמאפיינים:
- מבחינת השגיאה במצב מתמיד, אנו יכולים לראות שאין הבדל משמעותי בין ערכי ${k}_{i}$ שונים. ראינו זאת גם ב[[ICT1_007 משוב בהגברים גבוהים#שגיאה עבור הפרעת מדרגה|הרצאה]] (למשל עבור הפרעת מדרגה במצב מתמיד):
	$${e}_{\text{ss}}=\dfrac{1}{\lvert 1/P(0)+C(0) \rvert }=\dfrac{1}{\lvert C(0) \rvert }$$
	כלומר, ככל שההגבר הסטטי של $C(s)$ יותר גדול, כך נקבל ${e}_{\text{ss}}$ יותר קטן. במקרה שלנו, יש אינטגרטור בבקר, ולכן $\lvert C(0) \rvert \to \infty$, כך ש:
	$${e}_{\text{ss}}=0$$
- מבחינת ה-settling time, אנו רואים שככל ש-${k}_{i}$ יותר גדול, לוקח יותר זמן למערכת להגיע למצב מתמיד. בהרצאה ראינו שעבור הגבר אינטגרטור ${k}_{i}$ גבוה יותר מקבלים רוחב פס רחב יותר, שמאריך את ה- settling time.
- מבחינת ה-overshoot, אנו רואים שככל ש-${k}_{i}$ גדל, כך גם ה-$\mathrm{OS}$ גדל. ב[[ICT1_008 עיצוב חוג#ביצועים בתגובת מעבר|הרצאה]], באמת ראינו שככל שהרזוננס של $T(j\omega)$ יותר גבוה, נקבל $\mathrm{OS}$ יותר גדול. ואכן, הרזוננס של $T(j\omega)$ יותר גבוה עבור ערכי ${k}_{p}$ גדולים יותר. (בהרצאה ראינו שככל שה-$k$ עולה ב-$L(s):=P(s)C(s)$, כך גם הרזוננס של $T(j\omega)$).
- מבחינת ה-rise time, ניתן לראות שככל ש-${k}_{i}$ גדל, ה-rise time קטן. אנו יודעים מההרצאה שככל שרוחב הפס של $T(j\omega)$ יותר רחב, נקבל תגובה מהירה יותר, כלומר rise time נמוך יותר. ואכן, כאשר ${k}_{i}$ גדל, רוחב הפס של $T(j\omega)$ עולה, ולכן אנו מקבלים תגובה מהירה יותר.
- מבחינת המתח המקסימלי, אנו מקבלים שככל ש-${k}_{i}$ עולה, המתח המקסימלי גם עולה. ראינו זאת גם בהרצאה - ככל שרוחב הפס של $T(j\omega)$ יותר רחב (כפי שהסברנו, זה באמת קורה כאשר ${k}_{i}$ גדל), כך מאמץ הבקרה בחוג הסגור עולה.

## שאלה 20
כפי שהוסבר ב[[#שאלה 13]] ו[[#שאלה 19]], השגיאה במצב מתמיד באמת שואפת כעת לאפס. בבקר P, היה לנו $\lvert C(0) \rvert$ שלא שואף לאינסוף, כך שהשגיאה במצב מתמיד הייתה קבועה. לעומת זאת, בבקר PI, מאחר ויש לנו אינטגרטור, ההגבר הסטטי $\lvert C(0) \rvert$ כעת שואף לאינסוף, כך שאנו מקבלים שגיאה במצב מתמיד שואפת לאפס.

## שאלה 21
![[k_i_critical.png|bookhue]]
>תגובה בפועל ובתאוריה של המערכת עבור ערך קריטי של ${k}_{i}$ לסף יציבות.

בניסוי קיבלנו שהמערכת מתבדרת עבור ${k}_{i}=2.35$. ב[[#שאלה 17]] ראינו שהערך הקריטי של ${k}_{i}$ ליציבות הוא ${k}_{i}=2.8119$.
בגרף לעיל ניתן לראות כי התגובה התיאורטית באמת על סף יציבות.
מבחינת התגובה המדודה, מאחר וקשה מאוד למצוא את הסף במציאות, הסתפקנו בלמצוא תגובה המתבדרת לאט, ולכן קיבלנו תוצאה שונה (מעט) מהתגובה התאורטית.

## שאלה 22
כפי שראינו ב[[#שאלה 18]], במערכת היציבה, אחד הקטבים של החוג הפתוח הוא ${p}_{3}=-1/\tau$. הראנו גם שקוטב זה (בערכו המוחלט) הוא למעשה סף היציבות של ${k}_{i}$, שמהמדידות ב[[#שאלה 21]] קיבלנו שהוא ${k}_{i}=2.35$. לכן, מהמדידות:
$$\boxed {
{\tau}\approx 0.4253
 }$$
