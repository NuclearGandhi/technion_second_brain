---
aliases:
---

|                   | סטודנט א'                      | סטודנט ב'                          |
| ----------------- | ------------------------------ | ---------------------------------- |
| **שם**            | עידו פנג בנטוב                 | יובל הנדל                          |
| **ת"ז**           | 322869140                      | 211828587                          |
| **דואר אלקטרוני** | ido.fang@campus.technion.ac.il | yuval.hendel@campus.technion.ac.il |


קוד `MATLAB` נמצא ב[GitHub](https://github.com/NuclearGandhi/technion_second_brain/tree/master/Technion/ICT1/ICT1_HW001_code).

<div><hr><hr></div>


# חלק א'
## שאלה 1
ללא הזנחת השראות, ה[[#מנוע DC|משוואת מנוע DC]]:
$$
u(t)-u_{b}(t)=R\cdot i(t)+L\cdot \dot{i}(t)
$$
כאשר $u$ הוא המתח כניסה, ${u}_{b}$ הוא מתח הכא"מ החוזר, $R$ הוא התנגדות המנוע, $i(t)$ הוא הזרם, ו-$L$ הוא השראות המנוע.
נחלק ב-$R$:
$$
\dfrac{u(t)-u(b)}{R}=i(t)+\dfrac{L}{R}\dot{i}(t)
$$

בהזנחת ההשראות $L$ נקבל:
$$
\dfrac{v(t)-v(b)}{R}=i(t)
$$
מתח הכא"מ החוזר הוא:
$$
v_{b}=K_{b}\cdot\dot{\theta}_{m}
$$
כאשר ${K}_{b}$ הוא קבוע הכא"מ החוזר. לכן:
$$
i(t)=\dfrac{v(t)-K_{b}\cdot\dot{\theta}_{m}(t)}{R}
$$
נכפול בקבוע מנוע $K_{m}$:

$$
i(t)\cdot K_{m}=\tau_{m}(t)=\dfrac{K_{m}}{R}(v(t)-K_{b}\cdot\dot{\theta}_{m}(t))
$$
הביטוי בצד שמאל הוא למעשה המומנט שהמנוע מפעיל:
$$
\tau_{m}(t)=\dfrac{K_{m}}{R}(u(t)-K_{b}\dot{\theta}_{m}(t))\tag{1.1}
$$

במישור לפלס:
$$
T_{m}(s)=\dfrac{K_{m}}{R}(U(s)-K_{b}s\Theta_{m}(s)) \tag{1.1b}
$$
נתון כי הגלגל שיניים מגדיל את המומנט הנוצר ע"י המנוע לפי:
$${\tau}_{g}(t)={n}_{g}{\tau}_{m}(t) \tag{1.2}$$
בנוסף, נתון כי דינמיקת העומס מתוארת ע"י:
$$
J_{}\ddot{\theta}_{}(t)+f\dot{\theta}(t)={\tau}_{g}(t) \tag{1.3}
$$
נציב את כל המשוואות אחת בשנייה כדי לקבל את המשוואה הבאה עבור זווית זרוע המנוע. מהצבת $(\text{1.2})$ ב-$(\text{1.3})$:

$$J\ddot{\theta}(t)+f\dot{\theta}(t)={n}_{g}{\tau}_{m}(t)$$
נציב את $(\text{1.1a})$:
$$J\ddot{\theta}(t)+f\dot{\theta}(t)={n}_{g}\left[ \dfrac{{K}_{m}}{R}u(t)-{K}_{b}\dot{\theta}_{m}(t) \right] \tag{1.4a}$$

<div><hr><hr></div>

במישור לפלס:
$$\Theta(s)=\dfrac{{n}_{g}[({K}_{m}/R)U(s)-s{K}_{b}{\Theta}_{m}(s)]}{Js^{2}+fs} \tag{1.4b}$$


נוכל כעת לבנות את הדיאגרמת בלוקים:
![[ICT1_HW001 פרוייקטון 1 2024-12-30 14.37.50.excalidraw.svg]]
>דיאגרמת בלוקים של המערכת הנתונה.
## שאלה 2
מהדיאגרמת בלוקים, וכללי פישוט דיאגרמות:
$$\begin{aligned}
{P}_{\theta}(s) & =\dfrac{U(s)}{\Theta(s)} \\[1ex]
 & =\dfrac{\dfrac{{n}_{g}{K}_{m}}{Rs(Js+f)}}{1+\dfrac{{n}_{g}{K}_{m}}{Rs(Js+f)}\cdot {n}_{g}s{K}_{b}} \\[1ex]
 & 
\end{aligned}$$
נישאר עם:
$$\boxed {
{P}_{\theta}(s)=\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}
 } \tag{2.1}$$
 באותו אופן עבור ${P}_{\omega}(s)$:

$$\boxed {
{P}_{\omega}(s)=\dfrac{{n}_{g}{K}_{m}}{R(Js+f)+{{n}_{g}}^{2}{K}_{m}{K}_{b}}
 } \tag{2.2}$$

נרצה להציג את הפונקציית תמסורת בצורה הבאה:
$${P}_{\omega}(s)=\dfrac{k_{\text{st}}}{\tau s+1}$$
נמצא כי:
$$\boxed {
{k}_{\text{st}}:=\dfrac{{n}_{g}{K}_{m}}{Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b}},\qquad \tau:=\dfrac{RJ}{Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b}}
 }$$
כאשר ${k}_{\text{st}}$ הוא ההגבר הסטטי ו-$\tau$ הוא קבוע הזמן.

## שאלה 3
ניתן לראות מ-$(\text{2.2})$ ש-${P}_{\omega}(s)$ הוא proper ויש לו קוטב ב-LHP הפתוח (כל הקבועים חיוביים), ולכן הוא יציב.
עבור ${P}_{\theta}(s)$, ממשוואה $(2.1)$, יש קוטב ${s}_{0}=0$, ולכן הוא לא יציב.


# חלק ב'
![[{32044B42-4374-4B33-9EEC-64AFF719F902}.png|bookhue|500]]
נתונים:
$$\begin{aligned}
 & {K}_{m}={K}_{b}=\pu{0.0242N.m^{-1}.A^{-1}}, &  & R=\pu{2.15}\,\pu{\Omega}, \\[1ex]
 & J=0.0047, &  & f=0.004, \\[1ex]
 & {n}_{g}=4.85
\end{aligned}$$

## שאלה 4
### סעיף א'
עבור $C(s)={k}_{p}$ וה-${P}_{\theta}$ שקיבלנו:
$$
{P}_{\theta}(s)=\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}\tag{2.1}$$

ה[[ICT1_006 שיטת מקום גיאומטרי של שורשים#ייצוג מג"ש של הפולינום האופייני|ייצוג מג"ש]]:
$$\begin{gathered}
{\mathcal{X}}_{\text{cl}}=0 \\[1ex]
1+C(s)P(s)=0 \\[1ex]
1+\dfrac{{k}_{p}{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}=0 \\[1ex]
-\dfrac{1}{{k}_{p}}=:{G}_{k}(s)=\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}
\end{gathered}$$

לכן הקטבים בחוג הפתוח:
$${s}_{1}=0,\, {s}_{2}=-\dfrac{{{n}_{g}}^{2}{K}_{m}{K}_{b}+Rf}{RJ}$$

<div><hr><hr></div>

- עבור ${k}_{p}>0$:
	מאחר ויש מספר אי זוגי של שורשים מימין, בין ${s}_{1}$ ו-${s}_{2}$, נסיק כי יש ענף על [[ICT1_006 שיטת מקום גיאומטרי של שורשים#מג"ש על הציר הממשי|הציר הממשי]], בין ${s}_{1}$ ל-${s}_{2}$. בנוסף, יש עודף של שני קטבים, ולכן ישנם שתי [[ICT1_006 שיטת מקום גיאומטרי של שורשים#אסימפטוטות|אסימפטוטות]] בזוויות $\pm \pi /2$.
	![[q4_1.png|bookhue|500]]
	>מג"ש המערכת עבור ${k}_{p}>0$.
	
	נסיק שהמערכת יציבה עבור כל ${k}_{p}>0$.
- עבור ${k}_{p}<0$:
	מאחר ויש מספר זוגי של שורשים מימין ל-${s}_{1}$ ומשמאל ל-${s}_{2}$ נסיק כי יש ענף על הציר הממשי מימין ל-${s}_{1}$ ומשמאל ל-${s}_{2}$. בנוסף, יש עודף של שני קטבים, ולכן ישנם שתי אסימפטוטות בזוויות $0,\,\pi$.
	![[q4_2.png|bookhue|500]]
	>מג"ש המערכת עבור ${k}_{p}<0$.
	
	נסיק שהמערכת לא יציבה עבור כל ${k}_{p}<0$.


<div><hr><hr></div>

### סעיף ב'
ראינו בהרצאה שהשגיאה ${e}_{\text{ss}}$ עבור [[ICT1_007 משוב בהגברים גבוהים#שגיאה עבור אות ייחוס מדרגה|אות ייחוס מדרגה]] מתאפסת כאשר:
$${e}_{\text{ss}}=\lvert S(0) \rvert =\dfrac{1}{\lvert 1+P(0)C(0) \rvert }$$
במקרה שלנו:
$$\lvert P(0)C(0)\rvert =\lim_{ s \to 0}\left\lvert \dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}\cdot C(s) \right\rvert  =\infty $$
בהינתן ו- $C(0)\neq 0$, שזה נכון עבור כל בקר $C$ המייצב את המערכת.
נסיק ש- ${e}_{\text{ss}}=0$ אמ"ם $C$ מייצב את המערכת, שזה נכון עבור המקרה שלנו ש- $C(s)={k}_{p}$ לכל ${k}_{p}>0$.

### סעיף ג'
מערכת כללית מסדר שני היא מהצורה:
$$G(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}} \tag{4.1}$$
שלושת פונקציות התמסורת של החוג הסגור הן:
$$\begin{aligned}
 & r\to u: &  & \dfrac{C(s)}{1+P(s)C(s)}:=T_{c}(s) \\[1ex]
 & r\to y: &  & \dfrac{P(s)C(s)}{1+P(s)C(s)}:=T(s)=P(s)T_{c}(s) \\[1ex]
 & r\to e: &  & \dfrac{1}{1+P(s)C(s)}:=S(s)=1-T(s)
\end{aligned}$$
לכולם אותו המכנה, שהוא הפולינום האופייני:
$$\begin{aligned}
\mathcal{X}_{\text{cl}} & ={N}_{P}{N}_{C}+{D}_{P}{D}_{C} \\[1ex]
 & ={n}_{g}{K}_{m}{k}_{p}+s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b}) \\[1ex]
 & =RJ[s^{2}+s(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})/RJ+{n}_{g}{K}_{m}{k}_{p}/RJ]
\end{aligned}$$
לכן, כאשר נרצה להתאים את המערכות שלנו לצורה $(\text{4.1})$, נקבל שהתדירות הטבעית היא:
$${\omega}_{n}=\sqrt{ \dfrac{{n}_{g}{K}_{m}{k}_{p}}{RJ} } \tag{4.2}$$
ולכן מקדם הריסון:
$$\begin{gather}
2\zeta\sqrt{ \dfrac{{n}_{g}{K}_{m}{k}_{p}}{RJ} }=\dfrac{Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b}}{RJ} \\[1ex]
\zeta=\dfrac{1}{2} \sqrt{ \dfrac{1}{RJ{n}_{g}{K}_{m}{k}_{p}} } (Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b}) \tag{4.3}
\end{gather}$$
נבודד את ${k}_{p}$:
$${k}_{p}=\dfrac{1}{4\zeta ^{2}} \dfrac{1}{RJ{n}_{g}{K}_{m}}(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})^{2} \tag{4.4}$$

נציב נתונים ונקבל שערכי ${k}_{p}$ עבורם נקבל מקדמי ריסון $\zeta \in(0,0.69)$ הם:
$$\boxed {
0.22167<{k}_{p}<\infty 
 }$$
 לגבי $\mathrm{OS}$, במקרה של מערכת מסדר שני אנו יודעים ש:
 $$\mathrm{OS}=e^{-\pi \zeta/\sqrt{ 1-\zeta ^{2} }}$$
 ולכן נקבל שבטווח $\zeta \in(0,\,0.69)$:
 $$\boxed {
5\%<\mathrm{OS}<100\%
 }$$
### סעיף ד'
ממשוואה $(\text{4.2})$:
$${\omega}_{n}=\sqrt{ \dfrac{{n}_{g}{K}_{m}{k}_{p}}{RJ} }$$
נבודד את ${k}_{p}$:
$${k}_{p}={{\omega}_{n}}^{2} \dfrac{RJ}{{n}_{g}{K}_{m}}$$
ולכן נקבל ${\omega}_{n}>\pu{2.22rad/s}$ עבור:
$$\boxed {
{k}_{p}>0.4243
 }$$
 
### סעיף ה'
לפי [[ICT1_007 משוב בהגברים גבוהים#שגיאה עבור הפרעת מדרגה|שגיאה עבור הפרעת מדרגה]], השגיאה במצב מתמיד היא:
$${e}_{\text{ss}}=\dfrac{1}{\lvert 1/P(0)+C(0) \rvert }=\dfrac{1}{\lvert C(0) \rvert }$$
כאשר $1/P(0)$ נעלם לנו כי $P(0)= \infty$. במקרה הנתון, $e=\theta-d$, ורוצים ש- ${e}_{\text{ss}}=\lvert \lim_{ t \to \infty}\theta-\mathbb{1} \rvert\leq 1$, ולכן נדרוש ש- $1/\lvert C(0) \rvert\leq 1$. במילים אחרות:
$$\boxed {
{k}_{p}\geq  1
 }$$
לגבי הטווח $\mathrm{OS}$, ראינו במשוואה $(\text{4.3})$ ש:
$$\zeta=\dfrac{1}{2} \sqrt{ \dfrac{1}{RJ{n}_{g}{K}_{m}{k}_{p}} } (Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})$$
ולכן טווח ה-$\zeta$ הוא:
$$\zeta\geq  0.34671$$
כך שה-$\mathrm{OS}$, לפי $\mathrm{OS}=e^{-\pi \zeta/\sqrt{ 1-\zeta ^{2} }}$, הוא:

$$\boxed{  31.309\% \leq  \mathrm{OS}<100\%}$$


## שאלה 5
### סעיף א'
עבור הבקר $C(s)={k}_{p}\left( 1+\dfrac{{k}_{i}}{s} \right)$, נבנה את הייצוג מג"ש:
$$\begin{gathered}
{\mathcal{X}}_{\text{cl}}=0 \\[1ex]
1+C(s)P(s)=0 \\[1ex]
1+{k}_{p}\left( 1+\dfrac{{k}_{i}}{s} \right)\dfrac{{n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}=0 \\[1ex]
-\dfrac{1}{{k}_{p}}=\dfrac{(1+{k}_{i}/s){n}_{g}{K}_{m}}{s(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})} \\[1ex]
-\dfrac{1}{{k}_{p}}=:{G}_{k}(s)=\dfrac{(s+{k}_{i}){n}_{g}{K}_{m}}{s^{2}(RJs+Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})}
\end{gathered}$$

יש לנו אפס אחד ב- ${z}_{1}=-{k}_{i}$, ושלושה קטבים, שניים מהם על הראשית ${p}_{1,2}=0$, והשלישי ב- ${p}_{3}=-(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})/RJ$. לכן, נקבל דיאגרמות שונות כתלות במיקום ${z}_{1}$ יחסית ל-${p}_{3}$. כלומר, נפרק למקרים הבאים:

![[Technion/ICT1/ICT1_HW001_code/figs/q5_1.png|bookhue]]
>דיאגרמת מג"ש עבור ערכי ${k}_{p}$ ו-${k}_{i}$ שונים. לא נתייחס למקרה של ${k}_{i}<0$ כי ניתן לראות שהמערכת לא תהיה יציבה אם יהיה אפס ב-RHP. במקרה של ${k}_{i}=0$, נקבל בדיוק את אותו הבקר מ[[#שאלה 4]].

קיבלנו שהמערכת תהיה יציבה רק אם:
$$\boxed {
{k}_{p}>0 \qquad \text{and} \qquad 0<{k}_{i}<(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})/RJ 
 }$$
### סעיף ב'
כפי [[#שאלה 4#סעיף ב'|שאלה 4 סעיף ב']], ראינו שנקבל ${e}_{\text{ss}}=0$ עבור כל $C$ שמייצג את המערכת, או פשוט:
$$C(0)\neq 0$$
שזה נכון עבור המקרה שלנו ש-$C(s)={k}_{p}(1+{k}_{i}/s)$ עבור כל:
$$\boxed {
{k}_{p}>0 \qquad \text{and} \qquad 0<{k}_{i}<(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})/RJ 
 }$$

### סעיף ג'
באותו אופן כמו [[#שאלה 4#סעיף ה'|שאלה 4 סעיף ה']], נדרוש ש- $1/\lvert C(0) \rvert\leq 1$. במילים אחרות:
$$\begin{gathered}
\dfrac{1}{\lvert C(0) \rvert }\leq  1 \\[1ex]
\dfrac{1}{\left\lvert \lim_{ s \to 0}  {k}_{p}\left( 1+\dfrac{{k}_{i}}{s} \right)   \right\rvert }\leq  1
\end{gathered}$$
המכנה שואף לאינסוף, ולכן התנאי לעיל מתקיים עבור כל ${k}_{p}$ ו-${k}_{i}$. מאחר ודרוש גם מערכת יציבה, נדרוש ש:
$$\boxed {
{k}_{p}>0 \qquad \text{and} \qquad 0<{k}_{i}<(Rf+{{n}_{g}}^{2}{K}_{m}{K}_{b})/RJ 
 }$$


### סעיף ד'
עבור הרצת ערכי ${k}_{i}\geq 0.01$ ו-${k}_{p}$ שונים קיבלנו שעבור כניסת מדרגה, לפונקציית התמסורת $T=\dfrac{PC}{1+PC}$:
```
Best kp: 0.37748
Best ki: 0.01
Best Overshoot: 14.7704
Best Settling Time: 2.8092
```

תגובת המדרגה היא:
![[Technion/ICT1/ICT1_HW001_code/figs/q5_2.png|bookhue|500]]
>תגובת המדרגה של $T$.
